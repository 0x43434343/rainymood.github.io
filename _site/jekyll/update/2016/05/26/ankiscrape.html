<!DOCTYPE html>
<html lang="en-us">
  
  <head>
  <meta charset="UTF-8">
  <title>Jan Meppe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <link rel="stylesheet" href="/css/normalize.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/cayman.css">
</head>

  <body>
    <section class="page-header">
  <h1 class="project-name">Jan Meppe</h1>
  <h2 class="project-tagline">
    "Any sufficiently advanced technology is indistinguishable from magic." - Arthur
    C. Clarke
  </h2>
  <a href="http://rainymood.github.io/" class="btn">Home</a>
  <a href="https://github.com/Rainymood/" class="btn">My Github</a>
  <a href="#" class="btn">About me </a>
  <!--<h2 class="project-tagline"></h2>-->
</section>


    <section class="main-content">
      
      <h2>Scraping flashcards for Anki with Python</h2>
<p class="meta">26 May 2016</p>

<p>So while I am using Anki (flashcard program) to expand my
vocabulary for my upcoming GRE test (wish me luck) I came across
<a href="https://quizlet.com/14840887/500-practice-gre-vocabulary-words-flash-cards/">this word list</a>.</p>

<p>Would it be possible to write a Python script that grabs all the words and
definitions from that website and puts them in a text file which can be imported
into Anki? Let’s find out!</p>

<p>So, where do we start? Let’s first create a directory</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ cd Programming/Python
$ mkdir AnkiScrape
$ cd AnkiScrape
</code></pre>
</div>

<p>For this little project I used the following libraries: BeautifulSoup4 and urllib2</p>

<div class="highlighter-rouge"><pre class="highlight"><code>from bs4 import BeautifulSoup
import urllib2
</code></pre>
</div>

<p>Alright, what do we do now? I forgot how to use BeautifulSoup (BS4) so I had to
look it up. Stack Overflow to the <a href="http://stackoverflow.com/questions/15797861/using-beautifulsoup-and-urllib2-in-python-how-can-i-find-the-data-surrounded-by">rescue</a>. 
The code found on Stack Overflow was given as follows</p>

<div class="highlighter-rouge"><pre class="highlight"><code>import urllib2
from bs4 import BeautifulSoup
html = urllib2.urlopen( "http://www.google.com" ).read()
soup = BeautifulSoup( html )
</code></pre>
</div>

<p>Modifying that we find</p>

<div class="highlighter-rouge"><pre class="highlight"><code>from bs4 import BeautifulSoup
import urllib2

url = "https://quizlet.com/14840887/500-practice-gre-vocabulary-words-flash-cards/"
content = urllib2.urlopen(url).read()
soup = BeautifulSoup(content)
</code></pre>
</div>

<p>Now that we have a soup to work with, how are we going to extract the content
that we need?  Taking a quick peek in the source code of the URL shows the
following</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;span class='TermText qWord lang-en'&gt;avatar&lt;/span&gt;	&lt;/h3&gt;
&lt;span class='TermText qDef lang-en'&gt;(n.) the animal or human ... 
</code></pre>
</div>

<p>So the word is in the span class ‘TermText qWord lang-en’ and the definition of
the word is contained in the span class ‘TermText qDef lang-en’. I admit that I
have little knowledge of HTML which just shows that you don’t need to know HTML,
you just need to know what div the text is in! That is all we need to know to
retrieve it with BS4.</p>

<p>How do we retrieve something from a specific span class with BS4? I will spare
you the Google query but I found this question on Stack Overflow which asks the
exact same question
<a href="http://stackoverflow.com/questions/16248723/how-to-find-spans-with-a-specific-class-containing-specific-text-using-beautiful">here</a>.</p>

<p>Changing the code to fit our example we find</p>

<div class="highlighter-rouge"><pre class="highlight"><code>from bs4 import BeautifulSoup
import urllib2

url = "https://quizlet.com/14840887/500-practice-gre-vocabulary-words-flash-cards/"
content = urllib2.urlopen(url).read()
soup = BeautifulSoup(content)

# find list of all span elements containing the words and definitions
wordspan = soup.find_all('span', {'class' : 'TermText qWord lang-en'})
defspan = soup.find_all('span', {'class' : 'TermText qDef lang-en'})

# create list of lines corresponding to element texts 
words = [span.get_text() for span in wordspan]
defs = [span.get_text() for span in defspan]
</code></pre>
</div>

<p>After some research, I figured out that Anki simply accepts .txt files that are
comma and newline seperated, easy enough right? My first (probably not the most
elegant or Pythonic idea) is to zip the words and defs in a dictionary and then
print the key and according value. In hindsight, I should’ve just looped over
both lists with the same iterator.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>dictionary = dict(zip(words, defs)) # zip into dict

with open('GRE-vocab.txt','w') as out:
    for key in dictionary: 
        out.write('{0}, {1}\n'.format(key.encode('utf-8'), dictionary[key].encode('utf-8')))
        # print key.encode('utf-8'), dictionary[key].encode('utf-8'), '\n'
</code></pre>
</div>

<p>Which gives us the end result</p>

<div class="highlighter-rouge"><pre class="highlight"><code>from bs4 import BeautifulSoup
import urllib2

url = "https://quizlet.com/14840887/500-practice-gre-vocabulary-words-flash-cards/"
content = urllib2.urlopen(url).read()
soup = BeautifulSoup(content)

# find list of all span elements containing the words and definitions
wordspan = soup.find_all('span', {'class' : 'TermText qWord lang-en'})
defspan = soup.find_all('span', {'class' : 'TermText qDef lang-en'})

# create list of lines corresponding to element texts 
words = [span.get_text() for span in wordspan]
defs = [span.get_text() for span in defspan]

dictionary = dict(zip(words, defs)) # zip into dict

with open('GRE-vocab.txt','w') as out:
    for key in dictionary: 
        out.write('{0}, {1}\n'.format(key.encode('utf-8'), dictionary[key].encode('utf-8')))
</code></pre>
</div>

<p>Where the first 10 lines of GRE-vocab.txt are as follows</p>

<div class="highlighter-rouge"><pre class="highlight"><code>fawn, (v.) to flatter or grovel, (v.) to seek notice or favor
effigy, (n.) a crude person or figure which represents a hated person or ...
surreptitious, (adj.) sly, sneaky and covert
circumlocution, (n.) an indirect or roundabout way of speaking
importune, (v.) to demand by means of solicitation; (v.) to make unwanted...
umbrage, (n.) a feeling of anger, usually caused by offense; (n.) indigna...
kleptomaniac, (n.) someone consumed by the impulsive need to steal, witho...
sangfroid, (n.) coolness and composure, especially amidst trying and chal...
onus, (n.) a burdensome responsibility; burden of proof
turbid, (adj.) muddy due to sediment or foreign particles; (adj.) heavy, ...
</code></pre>
</div>

<p>Which can be imported into Anki to automatically create flashcards, awesome!
Mission accomplished!</p>



      <footer class="site-footer">
  <span class="site-footer-credits">
        Blog by: <a href="https://github.com/rainymood">Jan Meppe</a><br>
        Theme: <a href="https://github.com/pietromenna/jekyll-cayman-theme">Cayman</a>
  </span>
</footer>


    </section>

  </body>
</html>
